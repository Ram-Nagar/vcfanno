<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="https://github.com/brentp/vcfanno/CHANGES/"> 
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Changes - vcfanno</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">vcfanno</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../performance_tips/">Performance</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Changes</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../examples/clinvar_exac/">ClinvarExac</a>
</li>

                        
                            
<li >
    <a href="../examples/cadd/">CADD</a>
</li>

                        
                            
<li >
    <a href="../examples/exac_combine/exac_combine/">ExAC-Combine</a>
</li>

                        
                            
<li >
    <a href="../examples/gff_sv/gff_sv/">SV + GFF</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../performance_tips/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../examples/clinvar_exac/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/brentp/vcfanno">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#v029">v0.2.9</a></li>
        
    
        <li class="first-level "><a href="#v028">v0.2.8</a></li>
        
    
        <li class="first-level "><a href="#v027">v0.2.7</a></li>
        
    
        <li class="first-level "><a href="#v026">v0.2.6</a></li>
        
    
        <li class="first-level "><a href="#v025">v0.2.5</a></li>
        
    
        <li class="first-level "><a href="#v024">v0.2.4</a></li>
        
    
        <li class="first-level "><a href="#v023">v0.2.3</a></li>
        
    
        <li class="first-level "><a href="#v022">v0.2.2</a></li>
        
    
        <li class="first-level "><a href="#v021">v0.2.1</a></li>
        
    
        <li class="first-level "><a href="#v02">v0.2</a></li>
        
    
        <li class="first-level "><a href="#v011">v0.1.1</a></li>
        
    
        <li class="first-level "><a href="#v010">v0.1.0</a></li>
        
    
        <li class="first-level "><a href="#v0011">v0.0.11</a></li>
        
    
        <li class="first-level "><a href="#v0010">v0.0.10</a></li>
        
    
        <li class="first-level "><a href="#v009">v0.0.9</a></li>
        
    
        <li class="first-level "><a href="#v008">v0.0.8</a></li>
        
    
        <li class="first-level "><a href="#v007">v0.0.7</a></li>
        
    
        <li class="first-level "><a href="#v006">v0.0.6</a></li>
        
    
        <li class="first-level "><a href="#v005">v0.0.5</a></li>
        
    
        <li class="first-level "><a href="#v004">v0.0.4</a></li>
        
    
        <li class="first-level "><a href="#v003">v0.0.3</a></li>
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="v029">v0.2.9</h2>
<ul>
<li>support for CSI indexes. If present, a .csi file will be preferred over a .tbi.</li>
</ul>
<h2 id="v028">v0.2.8</h2>
<ul>
<li>fix fo #71 for out of bounds warning followed by panic.</li>
</ul>
<h2 id="v027">v0.2.7</h2>
<ul>
<li>restore multiple threads per annotation file after fix in biogo/hts (#64)</li>
<li>new op <code>setid</code> builtin to set the ID field and remove need for lua and fix some bugs.</li>
<li>fix bug in <code>self</code> with multiple alternates when there were multiple overlaps (thanks Matthew).</li>
<li>fix for #68, #69 -- with Number=A, op="self", the output will always have a number of elements
  equal to the number of alternates. If there are &gt; 1 annos for a given site, later values will
  overwrite previous.</li>
<li>new op <code>by_alt</code> that will have Number=A and will append multiple annotations for the same alternate
  (from the same file) and output them as pipe-delimited. e.g with 2 alts, it might look like: <code>0.111,0.222|0.333</code>
  when the 1st alternate has a single value and the 2nd alternate has 2 values.</li>
</ul>
<h2 id="v026">v0.2.6</h2>
<ul>
<li>fix race condition from 0.2.4 by reverting some speed improvements from that release.</li>
</ul>
<h2 id="v025">v0.2.5</h2>
<ul>
<li>better error messages</li>
</ul>
<h2 id="v024">v0.2.4</h2>
<ul>
<li>30-40% speed improvement when annotating with few, large files by parallelizing decompression.</li>
<li>handle multiple values to div2 (mostly for multi-allelics)</li>
<li>if <code>_af</code> or <code>af_</code> is in the <code>name</code> then make Number=A for a <code>postannotation</code>.</li>
</ul>
<h2 id="v023">v0.2.3</h2>
<ul>
<li>allow pulling the 'FILTER' field from a VCF by specifing 'FILTER' in the <code>fields</code></li>
<li>add new op for postannotation only 'delete' which can be used to remove fields from the INFO.</li>
<li>use Description from annotation as Description in annotated file (thanks @xuyangy for the implementation #43)</li>
</ul>
<h2 id="v022">v0.2.2</h2>
<ul>
<li>wholely fix order of error checking from postannotation (affects users using ID annotation) (thanks @vladsaveliev)</li>
</ul>
<h2 id="v021">v0.2.1</h2>
<ul>
<li>correct order of error-checking on return from postannotation (affects users using ID annotation)</li>
</ul>
<h2 id="v02">v0.2</h2>
<ul>
<li>proper support for multi-allelics in query and in annotation with <code>op="self"</code></li>
<li>allow post-annotation to set ID column</li>
</ul>
<h2 id="v011">v0.1.1</h2>
<ul>
<li>set number=1 when op=min see #40</li>
<li>fix when we get -0 converted to just '-' (#42)</li>
<li>when an annotation bed file has a header with 'ref' or 'reference' and 'alt' or 'alternate',
  then match on the ref and alt values defined in those columns (not just on position as for bed).</li>
<li>(vcfgo) allow double-digit number in header thanks @chapmanb</li>
<li>correct END position when using ref and alt from a file with only a position (infer end as start + len(ref)) [thanks Tomas].</li>
</ul>
<h2 id="v010">v0.1.0</h2>
<ul>
<li>drastically reduce the warning message output.</li>
<li>add field=['DP2'] for bam files which reports number of forward and reverse reads overlapping a variant.
  value returned can be replicated with: <code>samtools mpileup -A -x -Q 1 -q 1 -r chrom:pos-pos $bam</code></li>
<li>add op=sum</li>
<li>expose ref and alt to lua.</li>
</ul>
<h2 id="v0011">v0.0.11</h2>
<ul>
<li>when op=self, pull Number from the annotation file (previously Number was always 1)</li>
<li>when op=concat or op=uniq user Number=. </li>
<li>when name ends with '_float' '_int' or '_flag' that is used to determine the Type in the output and that is then stripped from the name. So, e.g. with
<code>names=["af_esp_aa_float"]</code>
The resulting header will be:</li>
</ul>
<pre><code>##INFO=&lt;ID=af_esp_aa,Number=1,Type=Float,Description=...
</code></pre>

<ul>
<li>fix regression with CIPOS/CIEND when using <code>-ends</code> with structural variants. (Thanks to Liron for reporting)</li>
<li>fix bug with uniq not uniq-ing (Thanks Liron for reporting)</li>
<li>improve error messages from lua (Thanks Komal Rathi for the test-case provoking this change).</li>
<li>improve handling of multiple values (usually due to multiple alts) for <code>max</code> and <code>min</code>. Now, if we have, e.g. var1:SAS=0.22,0.33
  and var2:SAS=0.25 then <code>max</code> will give 0.33. This change makes max and min recursive so they'll call themselves on nested slices.
  Thanks @snashraf for reporting. </li>
</ul>
<h2 id="v0010">v0.0.10</h2>
<ul>
<li>allow using postannotation even if not all requested fields were found for a given variant.</li>
<li>restore ability to have bams as annotation files. Can pull mapq and coverage. See <code>examples/conf.toml</code></li>
<li>fix regression where output was not in sorted order.</li>
<li>fix regression that resulted in "too many open files" error.</li>
<li>expand test-suite.</li>
<li>fix bug found when using max() op</li>
</ul>
<h2 id="v009">v0.0.9</h2>
<ul>
<li>restore ability to take query file from STDIN (no tabix required).</li>
<li>fix memory leak. memory use now scales with number of procs (-p).</li>
<li>added new op 'self' which should be used for most cases when matching on ref and alt as it
  determines the type from the annotation header and uses that to update the annotated header
  with the correct type.</li>
<li>new <a href="http://brentp.github.io/vcfanno/">documentation site</a></li>
<li>[[postannotation]] allows modifying stuff in the query VCF after annotation (or instead).
  See examples on the documentation site.</li>
<li>convert scripting engine to lua from javascript</li>
<li>add CADD conversion script and example</li>
</ul>
<h2 id="v008">v0.0.8</h2>
<ul>
<li>parallel chrom-sweep (removes problems with chromosome sort order).</li>
<li>as a result, files are required to be tabix'ed.</li>
<li>the chromosome sort order is no longer important.</li>
<li>fix bug in SV support of CIPOS, CIENDS</li>
<li>huge speed improvement (can annotate ~30K variants/second with 10 cpus).</li>
<li>remove server and cadd support (will return soon).</li>
<li>fix bug where header is not updated.</li>
<li>respect strict when -ends is used.</li>
</ul>
<h2 id="v007">v0.0.7</h2>
<ul>
<li>better support for flags. e.g. can specify a flag from js by ending the function name with _flag</li>
<li>[irelate] error if intervals are out of order within a file.</li>
<li>-base-path argument replaces basepath in .toml file</li>
<li>[vcfgo] report all headers in original file.</li>
<li>integrated server to host annotations</li>
<li>-ends argument will now use CIPOS and CIEND to annotate the left and right interval of an SV. If CIPOS
   and CIEND are undefined for a given interval, the ends will not be annotated.</li>
<li>for MNPs, cadd score is reported as a list of max values (of the 3 possible changes) for each reference base
  covered by the event.</li>
<li>fix bug in CADD annotation and provide CADD v1.3 download</li>
<li>~25-30% speed improvement. from a modest laptop:  <em>annotated 10195872 variants in 28.97 minutes (351984.0 / minute)</em></li>
</ul>
<h2 id="v006">v0.0.6</h2>
<ul>
<li><a href="https://github.com/brentp/vcfanno/tree/master/caddcode">support for CADD</a></li>
<li>concat defaults to | separator</li>
<li>speed improvements (vcfgo info field)</li>
<li>natural sort is default. use -lexographical to</li>
</ul>
<h2 id="v005">v0.0.5</h2>
<ul>
<li>allow natural sort (1, 2, ... 9, 10, 11 instead of 1, 10, 11 ..., 19, 2, 20) via flag</li>
<li>vcfgo: handle lines longer than 65KB <strong>major</strong></li>
<li>vcfgo: fix error reporting</li>
<li>irelate: report warning when chroms out of order</li>
</ul>
<h2 id="v004">v0.0.4</h2>
<ul>
<li>performance improvements for Javascript ops with pre-compilation.</li>
<li>bam: annotate with <code>mapq</code> and <code>seq</code> for mapping-quality and sequence respectively.</li>
<li>api now returns a channel on which to recieve annotated Relatables</li>
<li>vcfgo: fix printing of INFO fields with multiple values (thanks to Liron for reporting).</li>
<li>vcfgo: fix writing of ##SAMPLE and ##PEDIGREE headers. (thanks to Liron)</li>
</ul>
<h2 id="v003">v0.0.3</h2>
<ul>
<li>custom ops with javascript.</li>
<li>proper support for <CNV>, <INV></li>
<li>option to annotate BED files.</li>
<li>vcfanno has an <a href="https://godoc.org/github.com/brentp/vcfanno/tree/api">api</a> so it can be
  used from other progs. </li>
</ul></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
